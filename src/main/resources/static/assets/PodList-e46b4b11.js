import{r,a as S,j as e,c as $,L as H,B as K}from"./index-2e85eed9.js";import{F as W}from"./index.es-55149f84.js";import{m as q}from"./index-fb770e0d.js";import{l as z,C as G}from"./CMSPagination-8551283f.js";import{T as J}from"./index-9c37b3d3.js";const Q=e.jsx(W,{icon:q,style:{color:""}}),X=({searchTerm:d})=>{const c=r.useRef(null),P=window.location.href.split("/").pop();r.useEffect(()=>{v()},[]);const[k,C]=r.useState(!0),[o,L]=r.useState([]),v=async()=>{const t=`${K}/api/pod`,a={type:"podlist",manager:P};await S.post(t,a).then(s=>{L(s.data),p(s.data),C(!1)}).catch(s=>{console.log(s)})},b=r.useRef(null),[Y,T]=r.useState(!1),[Z,A]=r.useState(!1),[f,p]=r.useState([]),[i,ee]=r.useState([]),[x,D]=r.useState(),[l,E]=r.useState("asc"),[g,I]=r.useState(1),u=10;r.useEffect(()=>{const t=o.filter(a=>{const s=d.toLowerCase();return a.branch.toLowerCase().includes(s)||a.user.toLowerCase().includes(s)||a.updated_on.toLowerCase().includes(s)});p(t)},[d]),r.useLayoutEffect(()=>{const t=i.length>0&&i.length<o.length;T(i.length===o.length),A(t),b.current&&(b.current.indeterminate=t)},[i,o.length]);const _=t=>{I(t)};function O(t){window.confirm("Are you sure to delete this record!")?w(parseInt(t,10)):w(0)}const w=async t=>{if(t>0){const a="http://localhost:5000/api/pod",s={deleteid:t,type:"deleterecord"};await S.post(a,s).then(n=>{console.log(n),n.data=="1"?window.location.reload():alert("Delele Recoed Failed!, Please try again!")}).catch(n=>{console.log(n)})}},R=(t,a,s)=>t.sort((n,V)=>{const j=n[a],N=V[a];return j<N?s==="asc"?-1:1:j>N?s==="asc"?1:-1:0}),h=t=>{const a=x===t&&l==="asc"?"desc":"asc";D(t),E(a);const s=R([...o],t,l);p(s)},y=g*u,F=y-u,B=f.slice(F,y),M=Math.ceil(f.length/u),U=o.length;return e.jsx(e.Fragment,{children:k?e.jsx($,{}):e.jsxs("div",{className:"flex-1 flex justify-between flex-col rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 min-w-[900px]",children:[e.jsxs("div",{className:"relative overflow-x-scroll",children:[e.jsx(z.DownloadTableExcel,{filename:"User List",sheet:"vehicles",currentTableRef:c.current,children:e.jsx("button",{className:"bg-blue-500 font-bold py-2 px-4 rounded hover:bg-blue-700 transition duration-300",children:"Export Excel"})}),e.jsxs("table",{ref:c,className:"min-w-full table-fixed divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4 border-[#aaaaaa] border-b border-t",children:[e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>h("branch"),children:["Account ",x==="branch"?l==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>h("user"),children:["Manager ",x==="user"?l==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>h("updated_on"),children:["AWB Date ",x==="updated_on"?l==="asc"?"↑":"↓":""]}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:B.map((t,a)=>e.jsxs("tr",{className:`${a%2===1?"bg-gray-2 dark:bg-meta-4":"dark:bg-boxdark"} hover:cursor-pointer border-b border-[#aaaaaa]`,children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.branch}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.user}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.updated_on}),e.jsxs("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[e.jsx(H,{to:`/pod-view/${t.id}`,children:e.jsx("button",{className:"btn btn-primary",style:{padding:"6px 12px",color:"red"},children:"View POD"})}),e.jsx("a",{className:"btn btn-danger",onClick:s=>O(t.id),style:{padding:"6px 12px"},children:Q})]})]},a))})]})]}),e.jsx(G,{currentPage:g,totalPages:M,totalNumbers:U,perNumberPage:10,onPageChange:_})]})})},ne=()=>{const d=[{label:"New",path:"/users/add-user"}],[c,m]=r.useState("");return e.jsxs("div",{className:"w-full h-full flex flex-col gap-4 ",children:[e.jsx(J,{title:"",btns:d,searchTerm:c,setSearchTerm:m}),e.jsx(X,{searchTerm:c})]})};export{ne as default};
