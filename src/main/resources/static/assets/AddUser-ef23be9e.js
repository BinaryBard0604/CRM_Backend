import{u as w,r,j as e,a as p,_ as i,B as h}from"./index-2e85eed9.js";import{S as k}from"./react-select.esm-3abbb7bc.js";import{I as C,a as P,E as S}from"./index-497b2833.js";const F=()=>{w();const[g,d]=r.useState(!1),u=sessionStorage.getItem("userid"),[c,b]=r.useState(void 0),y=async()=>{const t=`${h}/api/branch-list`,a={type:"branch-list",user:u};try{const n=await p.post(t,a);b(n.data)}catch(n){console.log(n)}},j=c==null?void 0:c.map(t=>({label:t.branch,value:t.id})),[s,o]=r.useState({name:"",username:"",password:"",email:"",phone:"",branch:[""]}),v=t=>{o({...s,branch:Array.isArray(t)?t.map(a=>a.value):[]})};r.useEffect(()=>{y()},[]);const N=async()=>{const t=`${h}/api/adduser`;let a=0,n=s.email.lastIndexOf("@"),m=s.email.lastIndexOf("."),x=!1;if(Object.entries(s).forEach(([f,l])=>{l===""&&(a++,x=!0)}),x&&i.error("Please enter all the required fields!"),!(n<m&&n>0&&s.email.indexOf("@@")===-1&&m>2&&s.email.length-m>2)){i.error("Please enter a valid email id"),a++;return}if(!(a>0)){const f={type:"adduser",name:s.name,username:s.username,password:s.password,email:s.email,phone:s.phone,branch:s.branch,user:u};try{d(!0);const l=await p.post(t,f);l.data.status===1?(i.success(l.data.message),setTimeout(()=>{window.location.reload()},2e3)):i.error(l.data.message),d(!1)}catch(l){console.log(l)}}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 flex-1 h-full",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex flex-row gap-6 items-center",children:e.jsxs("div",{className:"flex flex-row text-center items-center gap-2 font-bold",children:["New User",e.jsx(C,{})]})}),e.jsx("div",{className:"flex flex-row items-center",children:e.jsx(P,{})})]}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 flex-1",children:[e.jsx("div",{className:"flex gap-2 mb-5",children:e.jsx("button",{type:"button",onClick:N,className:"flex items-center justify-center block px-5 rounded border border-primary bg-primary p-2 text-center font-medium text-white transition hover:bg-opacity-90",children:g?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border-4 border-transparent border-t-white animate-spin rounded-full"}),e.jsx("span",{className:"ml-2",children:"Saving..."})," "]}):e.jsx("p",{children:"Save"})})}),e.jsxs("div",{className:"flex flex-row gap-5 items-center h-10 mb-5",children:[e.jsx(S,{}),e.jsx("h1",{className:"text-3xl font-semibold",children:"New User"})]}),e.jsx("div",{className:"flex md:flex-row gap-5 flex-col",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 w-full",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"first-name",className:"block text-sm/6 font-medium text-gray-900",children:["Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"first-name",name:"name",value:s.name,onChange:t=>o({...s,name:t.target.value}),autoComplete:"given-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"last-name",className:"block text-sm/6 font-medium text-gray-900",children:["Username ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"last-name",name:"username",value:s.username,onChange:t=>o({...s,username:t.target.value}),type:"text",autoComplete:"family-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"last-name",className:"block text-sm/6 font-medium text-gray-900",children:["Password ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"last-name",name:"password",value:s.password,onChange:t=>o({...s,password:t.target.value}),type:"text",autoComplete:"family-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"last-name",className:"block text-sm/6 font-medium text-gray-900",children:["Email ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"last-name",name:"email",value:s.email,onChange:t=>o({...s,email:t.target.value}),type:"text",autoComplete:"family-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"last-name",className:"block text-sm/6 font-medium text-gray-900",children:["Phone ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"last-name",name:"phone",value:s.phone,onChange:t=>o({...s,phone:t.target.value}),type:"text",autoComplete:"family-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]})]})}),e.jsxs("label",{htmlFor:"last-name",className:"mt-5 block text-sm/6 font-medium text-gray-900",children:["Branch ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(k,{isMulti:!0,onChange:v,options:j})})]})]})})};export{F as default};
