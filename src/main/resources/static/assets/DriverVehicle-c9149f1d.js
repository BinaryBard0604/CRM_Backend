import{r as a,a as A,j as e,c as F,B as U}from"./index-2e85eed9.js";import{l as $,C as K}from"./CMSPagination-8551283f.js";import{T as M}from"./index-9c37b3d3.js";const H=({searchTerm:i})=>{a.useEffect(()=>{_()},[]);const d=a.useRef(null),[m,j]=a.useState(!0),[l,N]=a.useState([]),v=window.location.href.split("/").pop(),_=async()=>{const t=`${U}/api/getDriverVehicles`;A({method:"post",url:`${t}`,data:{driverId:v}}).then(s=>{N(s.data),h(s.data),j(!1)}).catch(s=>console.log(s))},u=a.useRef(null),[z,C]=a.useState(!1),[G,S]=a.useState(!1),[b,h]=a.useState([]),[x,J]=a.useState([]),[c,k]=a.useState(),[o,L]=a.useState("asc"),[f,P]=a.useState(1),p=10;a.useEffect(()=>{const t=l.filter(s=>{const r=i.toLowerCase();return s.driver_name.toLowerCase().includes(r)||s.plate_number.toLowerCase().includes(r)||s.reg_number.toLowerCase().includes(r)||s.branch.toLowerCase().includes(r)||s.from_date.toLowerCase().includes(r)||s.to_date.toLowerCase().includes(r)||s.status.toLowerCase().includes(r)});h(t)},[i]),a.useLayoutEffect(()=>{const t=x.length>0&&x.length<l.length;C(x.length===l.length),S(t),u.current&&(u.current.indeterminate=t)},[x,l.length]);const D=t=>{P(t)},T=(t,s,r)=>t.sort((V,B)=>{const y=V[s],w=B[s];return y<w?r==="asc"?-1:1:y>w?r==="asc"?1:-1:0}),n=t=>{const s=c===t&&o==="asc"?"desc":"asc";k(t),L(s);const r=T([...l],t,o);h(r)},g=f*p,E=g-p,R=b.slice(E,g),I=Math.ceil(b.length/p),O=l.length;return e.jsx(e.Fragment,{children:m?e.jsx(F,{}):e.jsxs("div",{className:"flex-1 flex justify-between flex-col rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 min-w-[900px]",children:[e.jsxs("div",{className:"relative overflow-x-scroll",children:[e.jsx($.DownloadTableExcel,{filename:"User List",sheet:"vehicles",currentTableRef:d.current,children:e.jsx("button",{className:"bg-blue-500 font-bold py-2 px-4 rounded hover:bg-blue-700 transition duration-300",children:"Export Excel"})}),e.jsxs("table",{ref:d,className:"min-w-full table-fixed divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4 border-[#aaaaaa] border-b border-t",children:[e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("driver_name"),children:["Driver ",c==="driver_name"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("plate_number"),children:["Plate Number ",c==="plate_number"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("reg_number"),children:["Reg.Number ",c==="reg_number"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("branch"),children:["Branch ",c==="branch"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("from_date"),children:["From Date ",c==="from_date"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("to_date"),children:["To Date ",c==="to_date"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("status"),children:["Status ",c==="status"?o==="asc"?"↑":"↓":""]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:R.map((t,s)=>e.jsxs("tr",{className:`${s%2===1?"bg-gray-2 dark:bg-meta-4":"dark:bg-boxdark"} hover:cursor-pointer border-b border-[#aaaaaa]`,children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.driver_name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.plate_number}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.reg_number}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.branch}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.from_date}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.to_date}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.status})]},s))})]})]}),e.jsx(K,{currentPage:f,totalPages:I,totalNumbers:O,perNumberPage:10,onPageChange:D})]})})},Y=()=>{const i=[],[d,m]=a.useState("");return e.jsxs("div",{className:"w-full h-full flex flex-col gap-4 ",children:[e.jsx(M,{title:"",btns:i,searchTerm:d,setSearchTerm:m}),e.jsx(H,{searchTerm:d})]})};export{Y as default};
