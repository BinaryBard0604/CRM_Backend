import{u as p,r as l,a as i,B as r,j as e,_ as n}from"./index-2e85eed9.js";import{I as g,a as b,E as v}from"./index-497b2833.js";const y=()=>{sessionStorage.getItem("branch"),sessionStorage.getItem("role");const d=sessionStorage.getItem("userid");p();const[a,o]=l.useState({id:"",veh_name:"",brandId:""}),[m,x]=l.useState([]),[u,c]=l.useState(!1),h=window.location.href.split("/").pop();l.useEffect(()=>{i({method:"post",url:`${r}/api/brandList`,data:{}}).then(s=>{x(s.data)}).catch(s=>console.log(s)),i({method:"post",url:`${r}/api/vehicleName`,data:{user:d,type:"details",id:h}}).then(s=>{o(s.data[0])}).catch(s=>console.log(s))},[]);function f(s){a.veh_name!=""&&a.brandId!=""?(console.log(s),c(!0),i({method:"post",url:`${r}/api/vehicleName`,data:{user:d,veh_name:a.veh_name,brandId:a.brandId,type:"update",id:s}}).then(t=>{t.data[0].allowed==0?n.success(t.data[0].message):n.error(t.data[0].message),c(!1)}).catch(t=>console.log(t))):n.error("Please fill all the required fields")}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 flex-1 h-full",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex flex-row gap-6 items-center",children:e.jsxs("div",{className:"flex flex-row text-center items-center gap-2 font-bold",children:["New Vehicle Name",e.jsx(g,{})]})}),e.jsx("div",{className:"flex flex-row items-center",children:e.jsx(b,{})})]}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 flex-1",children:[e.jsx("div",{className:"flex gap-2 mb-5",children:e.jsx("button",{type:"button",onClick:()=>f(a.id),className:"flex items-center justify-center block px-5 rounded border border-primary bg-primary p-2 text-center font-medium text-white transition hover:bg-opacity-90",children:u?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border-4 border-transparent border-t-white animate-spin rounded-full"}),e.jsx("span",{className:"ml-2",children:"Saving..."})," "]}):e.jsx("p",{children:"Save"})})}),e.jsxs("div",{className:"flex flex-row gap-5 items-center h-10 mb-5",children:[e.jsx(v,{}),e.jsx("h1",{className:"text-3xl font-semibold",children:"New Vehicle Name"})]}),e.jsx("div",{className:"flex md:flex-row gap-5 flex-col",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 w-full",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"first-name",className:"block text-sm/6 font-medium text-gray-900",children:"Vehicle Name"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{name:"vehicle_type",value:a.veh_name,onChange:s=>o({...a,veh_name:s.target.value}),autoComplete:"given-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"last-name",className:"block text-sm/6 font-medium text-gray-900",children:"Brand"}),e.jsx("div",{className:"mt-2",children:e.jsxs("select",{name:"fuel_allowance",value:a.brandId,onChange:s=>o({...a,brandId:s.target.value}),autoComplete:"family-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6",children:[e.jsx("option",{value:"",children:"Select the brand"}),m.map((s,t)=>e.jsx("option",{value:s.id,children:s.brand},t))]})})]})]})})]})]})})};export{y as default};
