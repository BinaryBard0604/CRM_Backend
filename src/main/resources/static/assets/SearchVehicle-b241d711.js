import{u as Z,r as a,a as H,j as e,c as K,B as $,L as q}from"./index-2e85eed9.js";import{l as z,C as U}from"./CMSPagination-8551283f.js";const G=({searchTerm:x,searchFilter:d,handle:m})=>{Z();const h=a.useRef(null),p=sessionStorage.getItem("branch"),u=sessionStorage.getItem("role"),[b,g]=a.useState(!1),c=sessionStorage.getItem("userid"),[i,_]=a.useState([]),j=a.useRef(null),[Q,L]=a.useState(!1),[X,P]=a.useState(!1),[k,w]=a.useState([]),[f,Y]=a.useState([]),[l,D]=a.useState(),[o,E]=a.useState("asc"),[v,T]=a.useState(1),y=10,I=`${$}/api/vehicleAction`;a.useEffect(()=>{console.log(">>>>>>>>>>>>>",d,m),d!=""&&(g(!0),H({method:"post",url:I,data:{branch:p,user_role:u,user:c,searchdata:d,type:"search"}}).then(t=>{_(t.data),w(t.data),g(!1),g(!1)}).catch(t=>console.log(t.message)))},[m]),a.useEffect(()=>{const t=i.filter(s=>{const r=x.toLowerCase();return s.plate_number.toLowerCase().includes(r)||s.driver_name.toLowerCase().includes(r)||s.branch.toLowerCase().includes(r)||s.from_date.toLowerCase().includes(r)||s.to_date.toLowerCase().includes(r)||s.vehicle_notes.toLowerCase().includes(r)||s.notes.toLowerCase().includes(r)||s.status.toLowerCase().includes(r)||s.created_at.toLowerCase().includes(r)});w(t)},[x]),a.useLayoutEffect(()=>{const t=f.length>0&&f.length<i.length;L(f.length===i.length),P(t),j.current&&(j.current.indeterminate=t)},[f,i.length]);const B=t=>{T(t)},F=(t,s,r)=>t.sort((A,W)=>{const S=A[s],C=W[s];return S<C?r==="asc"?-1:1:S>C?r==="asc"?1:-1:0}),n=t=>{const s=l===t&&o==="asc"?"desc":"asc";D(t),E(s);const r=F([...i],t,o);w(r)},N=v*y,R=N-y,V=k.slice(R,N),O=Math.ceil(k.length/y),M=i.length;return e.jsx(e.Fragment,{children:b?e.jsx(K,{}):e.jsxs("div",{className:"flex-1 flex justify-between flex-col rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 min-w-[900px]",children:[e.jsxs("div",{className:"relative overflow-x-scroll",children:[e.jsx(z.DownloadTableExcel,{filename:"Search Vehicle",sheet:"vehicles",currentTableRef:h.current,children:e.jsx("button",{className:"bg-blue-500 font-bold py-2 px-4 rounded hover:bg-blue-700 transition duration-300",children:"Export Excel"})}),e.jsxs("table",{ref:h,className:"min-w-full table-fixed divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4 border-[#aaaaaa] border-b border-t",children:[e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("plate_number"),children:["Reg. Number ",l==="plate_number"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("driver_name"),children:["Driver ",l==="driver_name"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("branch"),children:["Branch ",l==="branch"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("from_date"),children:["From Date ",l==="from_date"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("to_date"),children:["To Date ",l==="to_date"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("vehicle_notes"),children:["Vehicle Notes ",l==="vehicle_notes"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("notes"),children:["Notes ",l==="notes"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("status"),children:["Status ",l==="status"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("created_at"),children:["Created Date ",l==="created_at"?o==="asc"?"↑":"↓":""]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:V.map((t,s)=>e.jsxs("tr",{className:`${s%2===1?"bg-gray-2 dark:bg-meta-4":"dark:bg-boxdark"} hover:cursor-pointer border-b border-[#aaaaaa]`,children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.plate_number}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.driver_name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.branch}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.from_date}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.to_date}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.vehicle_notes}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.notes}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.status}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.created_at})]},s))})]})]}),e.jsx(U,{currentPage:v,totalPages:O,totalNumbers:M,perNumberPage:10,onPageChange:B})]})})},J=({btns:x,title:d,searchTerm:m,searchFilter:h,handle:p,setHandle:u,setSearchTerm:b,setFilter:g})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row justify-between w-full",children:[e.jsxs("div",{className:"flex flex-row gap-6 items-center",children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[x&&x.map((c,i)=>e.jsx(q,{to:c.path,children:e.jsx("div",{className:"h-8 px-3 items-center flex bg-bodydark2 rounded-md text-white hover:cursor-pointer hover:bg-bodydark dark:bg-boxdark dark:border-[1px] dark:border-bodydark2",children:c.label})},i)),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center max-w-sm mx-auto",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5v10M3 5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm12 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm0 0V6a3 3 0 0 0-3-3H9m1.5-2-2 2 2 2"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search branch name...",value:h,onChange:c=>g(c.target.value),required:!0})]}),e.jsxs("button",{onClick:c=>u(!p),className:"p-2.5 ms-2 text-sm font-medium bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[e.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),e.jsx("span",{className:"sr-only",children:"Search"})]})]})})]}),e.jsx("div",{className:"flex flex-row text-center items-center gap-2 font-bold",children:d})]}),e.jsxs("div",{className:"relative items-center flex",children:[e.jsx("input",{type:"search",placeholder:"Search...",value:m,onChange:c=>b(c.target.value),className:"pl-8 pr-2 py-1 border border-bodydark2 rounded-md w-80 dark:bg-boxdark bg-stroke focus:outline-none"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),se=()=>{const x=[],[d,m]=a.useState(""),[h,p]=a.useState(""),[u,b]=a.useState(!1);return e.jsxs("div",{className:"w-full h-full flex flex-col gap-4 ",children:[e.jsx(J,{title:"",btns:x,searchTerm:d,setSearchTerm:m,setFilter:p,searchFilter:h,handle:u,setHandle:b}),e.jsx(G,{searchTerm:d,searchFilter:h,handle:u})]})};export{se as default};
