import{u as U,r as s,a as v,B as S,j as t,c as z}from"./index-2e85eed9.js";import{l as G,C as H}from"./CMSPagination-8551283f.js";import{F as k}from"./index.es-55149f84.js";import{m as J,n as Q}from"./index-fb770e0d.js";import{T as W}from"./index-9c37b3d3.js";const X=t.jsx(k,{icon:J,style:{color:"red"}}),Y=t.jsx(k,{icon:Q,style:{color:"blue"}}),Z=({searchTerm:n})=>{const c=U(),l=s.useRef(null),[C,T]=s.useState(!0),[o,E]=s.useState([]),u=s.useRef(null),[ee,L]=s.useState(!1),[te,P]=s.useState(!1),[f,h]=s.useState([]),[i,se]=s.useState([]),[m,I]=s.useState(),[d,D]=s.useState("asc"),[p,R]=s.useState(1),x=10;sessionStorage.getItem("branch"),sessionStorage.getItem("role");const b=sessionStorage.getItem("userid");s.useEffect(()=>{v({method:"post",url:`${S}/api/vehicleName`,data:{user:b,type:"list"}}).then(e=>{E(e.data),h(e.data),T(!1)}).catch(e=>console.log(e))},[]),s.useEffect(()=>{const e=o.filter(a=>{const r=n.toLowerCase();return a.vehicle_name.toLowerCase().includes(r)||a.brand.toLowerCase().includes(r)});h(e)},[n]),s.useLayoutEffect(()=>{const e=i.length>0&&i.length<o.length;L(i.length===o.length),P(e),u.current&&(u.current.indeterminate=e)},[i,o.length]);const V=e=>{R(e)};function O(e){window.confirm("Are you sure you wish to delete this item?")?g(parseInt(e,10)):g(0)}function g(e){e>0&&v({method:"post",url:`${S}/api/vehicleName`,data:{user:b,record:e,type:"delete"}}).then(a=>{window.location.reload()}).catch(a=>console.log(a))}function _(e){c(`/vehicles/edit-vehicle-name/${e}`)}const A=(e,a,r)=>e.sort((M,q)=>{const w=M[a],N=q[a];return w<N?r==="asc"?-1:1:w>N?r==="asc"?1:-1:0}),y=e=>{const a=m===e&&d==="asc"?"desc":"asc";I(e),D(a);const r=A([...o],e,d);h(r)},j=p*x,B=j-x,F=f.slice(B,j),$=Math.ceil(f.length/x),K=o.length;return t.jsx(t.Fragment,{children:C?t.jsx(z,{}):t.jsxs("div",{className:"flex-1 flex justify-between flex-col rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 min-w-[900px]",children:[t.jsxs("div",{className:"relative overflow-x-scroll",children:[t.jsx(G.DownloadTableExcel,{filename:"Telephone Report",sheet:"vehicles",currentTableRef:l.current,children:t.jsx("button",{className:"bg-blue-500 font-bold py-2 px-4 rounded hover:bg-blue-700 transition duration-300",children:"Export Excel"})}),t.jsxs("table",{ref:l,className:"min-w-full table-fixed divide-y divide-gray-300",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4 border-[#aaaaaa] border-b border-t",children:[t.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>y("vehicle_name"),children:["Vehicle Name ",m==="vehicle_name"?d==="asc"?"↑":"↓":""]}),t.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>y("brand"),children:["Brand ",m==="brand"?d==="asc"?"↑":"↓":""]}),t.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:F.map((e,a)=>t.jsxs("tr",{className:`${a%2===1?"bg-gray-2 dark:bg-meta-4":"dark:bg-boxdark"} hover:cursor-pointer border-b border-[#aaaaaa]`,children:[t.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.vehicle_name}),t.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.brand}),t.jsxs("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[t.jsx("a",{title:"Delete Vehicle Name",id:e.id,onClick:()=>O(e.id),className:"",children:X}),"   ",t.jsx("a",{title:"Edit Vehicle Name",id:e.id,onClick:()=>_(e.id),className:"",children:Y})]})]},a))})]})]}),t.jsx(H,{currentPage:p,totalPages:$,totalNumbers:K,perNumberPage:10,onPageChange:V})]})})},le=()=>{const n=[{label:"New",path:"/vehicles/add-vehicle-name"}],[c,l]=s.useState("");return t.jsxs("div",{className:"w-full h-full flex flex-col gap-4 ",children:[t.jsx(W,{title:"",btns:n,searchTerm:c,setSearchTerm:l}),t.jsx(Z,{searchTerm:c})]})};export{le as default};
