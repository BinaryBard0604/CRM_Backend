import{r as a,a as F,j as e,c as U,B as $}from"./index-2e85eed9.js";import{l as K,C as M}from"./CMSPagination-8551283f.js";import{T as V}from"./index-9c37b3d3.js";const H=({searchTerm:i})=>{a.useEffect(()=>{N()},[]);const d=a.useRef(null),[p,j]=a.useState(!0),[c,w]=a.useState([]),_=window.location.href.split("/").pop(),N=async()=>{const t=`${$}/api/getDriverLeaves`;F({method:"post",url:`${t}`,data:{driverId:_}}).then(s=>{w(s.data),m(s.data),j(!1)}).catch(s=>console.log(s))},u=a.useRef(null),[z,C]=a.useState(!1),[G,L]=a.useState(!1),[f,m]=a.useState([]),[x,J]=a.useState([]),[l,S]=a.useState(),[o,k]=a.useState("asc"),[g,T]=a.useState(1),h=10;a.useEffect(()=>{const t=c.filter(s=>{const r=i.toLowerCase();return s.driver_name.toLowerCase().includes(r)||s.leave_type.toLowerCase().includes(r)||s.leave_from.toLowerCase().includes(r)||s.leave_to.toLowerCase().includes(r)||s.notes.toLowerCase().includes(r)||s.rejoin_date.toLowerCase().includes(r)||s.rejoin_notes.toLowerCase().includes(r)||s.appoval_status.toLowerCase().includes(r)});m(t)},[i]),a.useLayoutEffect(()=>{const t=x.length>0&&x.length<c.length;C(x.length===c.length),L(t),u.current&&(u.current.indeterminate=t)},[x,c.length]);const P=t=>{T(t)},D=(t,s,r)=>t.sort((A,B)=>{const y=A[s],v=B[s];return y<v?r==="asc"?-1:1:y>v?r==="asc"?1:-1:0}),n=t=>{const s=l===t&&o==="asc"?"desc":"asc";S(t),k(s);const r=D([...c],t,o);m(r)},b=g*h,E=b-h,R=f.slice(E,b),I=Math.ceil(f.length/h),O=c.length;return e.jsx(e.Fragment,{children:p?e.jsx(U,{}):e.jsxs("div",{className:"flex-1 flex justify-between flex-col rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 min-w-[900px]",children:[e.jsxs("div",{className:"relative overflow-x-scroll",children:[e.jsx(K.DownloadTableExcel,{filename:"User List",sheet:"vehicles",currentTableRef:d.current,children:e.jsx("button",{className:"bg-blue-500 font-bold py-2 px-4 rounded hover:bg-blue-700 transition duration-300",children:"Export Excel"})}),e.jsxs("table",{ref:d,className:"min-w-full table-fixed divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4 border-[#aaaaaa] border-b border-t",children:[e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("driver_name"),children:["Driver ",l==="driver_name"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("leave_type"),children:["Leave Type ",l==="leave_type"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("leave_from"),children:["Leave From ",l==="leave_from"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("leave_to"),children:["Leave To ",l==="leave_to"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("notes"),children:["Notes ",l==="notes"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("rejoin_date"),children:["Rejoin Date ",l==="rejoin_date"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("rejoin_notes"),children:["Rejoin Notes ",l==="rejoin_notes"?o==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("appoval_status"),children:["Approval Status ",l==="appoval_status"?o==="asc"?"↑":"↓":""]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:R.map((t,s)=>e.jsxs("tr",{className:`${s%2===1?"bg-gray-2 dark:bg-meta-4":"dark:bg-boxdark"} hover:cursor-pointer border-b border-[#aaaaaa]`,children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.driver_name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.leave_type}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.leave_from}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.leave_to}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.notes}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.rejoin_date}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.rejoin_notes}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.appoval_status})]},s))})]})]}),e.jsx(M,{currentPage:g,totalPages:I,totalNumbers:O,perNumberPage:10,onPageChange:P})]})})},Y=()=>{const i=[],[d,p]=a.useState("");return e.jsxs("div",{className:"w-full h-full flex flex-col gap-4 ",children:[e.jsx(V,{title:"",btns:i,searchTerm:d,setSearchTerm:p}),e.jsx(H,{searchTerm:d})]})};export{Y as default};
