import{u as B,r as c,a as M,j as e,c as F,B as K}from"./index-2e85eed9.js";import{l as $,C as H}from"./CMSPagination-8551283f.js";import{T as U}from"./index-9c37b3d3.js";const q=({searchTerm:d})=>{B();const i=c.useRef(null),[m,j]=c.useState(!0),N=sessionStorage.getItem("userid"),[o,C]=c.useState([]),u=c.useRef(null),[z,v]=c.useState(!1),[G,S]=c.useState(!1),[g,p]=c.useState([]),[x,J]=c.useState([]),[l,k]=c.useState(),[r,_]=c.useState("asc"),[f,L]=c.useState(1),h=10,P=`${K}/api/vehicleAction`;c.useEffect(()=>{M({method:"post",url:P,data:{user:N,type:"old"}}).then(t=>{C(t.data),p(t.data),j(!1)}).catch(t=>console.log(t.message))},[]),c.useEffect(()=>{const t=o.filter(s=>{const a=d.toLowerCase();return s.vehicle_name.toLowerCase().includes(a)||s.reg_number.toLowerCase().includes(a)||s.mileage.toLowerCase().includes(a)||s.driver_name.toLowerCase().includes(a)||s.branch.toLowerCase().includes(a)||s.purchase_to.toLowerCase().includes(a)||s.status.toLowerCase().includes(a)||s.plan.toLowerCase().includes(a)||s.comment.toLowerCase().includes(a)||s.difference.toLowerCase().includes(a)});p(t)},[d]),c.useLayoutEffect(()=>{const t=x.length>0&&x.length<o.length;v(x.length===o.length),S(t),u.current&&(u.current.indeterminate=t)},[x,o.length]);const E=t=>{L(t)},T=(t,s,a)=>t.sort((I,V)=>{const y=I[s],w=V[s];return y<w?a==="asc"?-1:1:y>w?a==="asc"?1:-1:0}),n=t=>{const s=l===t&&r==="asc"?"desc":"asc";k(t),_(s);const a=T([...o],t,r);p(a)},b=f*h,R=b-h,A=g.slice(R,b),D=Math.ceil(g.length/h),O=o.length;return e.jsx(e.Fragment,{children:m?e.jsx(F,{}):e.jsxs("div",{className:"flex-1 flex justify-between flex-col rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1 min-w-[900px]",children:[e.jsxs("div",{className:"relative overflow-x-scroll",children:[e.jsx($.DownloadTableExcel,{filename:"Old Vehicles",sheet:"vehicles",currentTableRef:i.current,children:e.jsx("button",{className:"bg-blue-500 font-bold py-2 px-4 rounded hover:bg-blue-700 transition duration-300",children:"Export Excel"})}),e.jsxs("table",{ref:i,className:"min-w-full table-fixed divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4 border-[#aaaaaa] border-b border-t",children:[e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("vehicle_name"),children:["Vehicle Name ",l==="vehicle_name"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("reg_number"),children:["Reg Number ",l==="reg_number"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("mileage"),children:["Mileage ",l==="mileage"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("driver_name"),children:["Driver ",l==="driver_name"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("branch"),children:["Branch ",l==="branch"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("purchase_to"),children:["Rental/Lease Expiry ",l==="purchase_to"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("status"),children:["Assignment Status ",l==="status"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("plan"),children:["Plan ",l==="plan"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("comment"),children:["Comment ",l==="comment"?r==="asc"?"↑":"↓":""]}),e.jsxs("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",onClick:()=>n("difference"),children:["Differnece ",l==="difference"?r==="asc"?"↑":"↓":""]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:A.map((t,s)=>e.jsxs("tr",{className:`${s%2===1?"bg-gray-2 dark:bg-meta-4":"dark:bg-boxdark"} hover:cursor-pointer border-b border-[#aaaaaa]`,children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.vehicle_name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.reg_number}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.mileage}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.driver_name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.branch}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.purchase_to}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.status}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.plan}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.comment}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.difference})]},s))})]})]}),e.jsx(H,{currentPage:f,totalPages:D,totalNumbers:O,perNumberPage:10,onPageChange:E})]})})},Y=()=>{const d=[],[i,m]=c.useState("");return e.jsxs("div",{className:"w-full h-full flex flex-col gap-4 ",children:[e.jsx(U,{title:"",btns:d,searchTerm:i,setSearchTerm:m}),e.jsx(q,{searchTerm:i})]})};export{Y as default};
